# .pre-commit-config.yaml - Configuration pre-commit pour monitoring-client

repos:
  # 1. Hooks généraux pre-commit
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.6.0
    hooks:
      - id: trailing-whitespace
        args: [--markdown-linebreak-ext=md]
      - id: end-of-file-fixer
      - id: check-yaml

  # 2. Black - Formatage automatique du code Python
  - repo: https://github.com/psf/black
    rev: 24.10.0
    hooks:
      - id: black
        args:
          - --line-length=120
          - --skip-string-normalization

  # 3. isort - Tri automatique des imports Python
  - repo: https://github.com/PyCQA/isort
    rev: 5.13.2
    hooks:
      - id: isort
        args:
          - --profile=black
          - --line-length=120
          - --multi-line=3
          - --trailing-comma

  # 4. Flake8 - Linter Python (PEP 8, erreurs de syntaxe, etc.)
#  - repo: https://github.com/PyCQA/flake8
#    rev: 7.1.1
#    hooks:
#      - id: flake8
#        args:
#          - --max-line-length=120
#          - --extend-ignore=E203,W503,E501
#        additional_dependencies:
#          - flake8-docstrings>=1.7.0
#          - flake8-bugbear>=24.0.0
#          - flake8-comprehensions>=3.15.0
#          - flake8-simplify>=0.21.0
#          - pep8-naming>=0.14.0


# ---------------------------------------------------------------------------
# Configuration globale
# ---------------------------------------------------------------------------
default_language_version:
  python: python3  # Utilisation de la version Python par défaut

# Exclure certains fichiers/répertoires de l'analyse
exclude: '^(\.git/|\.venv/|venv/|dist/|build/|.*\.egg-info/|__pycache__/|\.pytest_cache/|\.mypy_cache/|rpmbuild/|release/).*$'

# Options globales
fail_fast: false  # Ne pas échouer immédiatement à la première erreur
